# server {
#   listen 80;
#   server_name localhost;

#   root /usr/share/nginx/html;

#   # Cache para assets de build (JS, CSS, etc)
#   location ~* \.(js|css|png|jpg|jpeg|gif|svg|ico|woff|woff2)$ {
#     expires 1y;
#     add_header Cache-Control "public, immutable";
#     try_files $uri =404;
#   }

#   # Microfrontends (ex: /admin, /cliente, /dashboard)
#   # Tudo deve voltar para o index.html
#   location / {
#     # proxy_pass http://container:9000;
#     try_files $uri $uri/ /index.html;
#     # proxy_set_header Host $host;
#     # proxy_set_header X-Real-IP $remote_addr;
#     # proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#   }

#   # GZIP para compressão
#   gzip on;
#   gzip_types text/plain text/css application/json application/javascript application/octet-stream;
# }
# /nginx/nginx.conf (Corrigido para servir SPA)
server {
  listen 80;
  server_name localhost;

  root /usr/share/nginx/html; # <- A pasta 'dist' está aqui

  # Cache para assets
  location ~* \.(js|css|png|jpg|jpeg|gif|svg|ico|woff|woff2)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
    # Se o arquivo existir, serve. Senão, 404.
    try_files $uri =404; 
  }

  # Todas as rotas (incluindo o index.html principal)
  location / {
    # Se o arquivo for encontrado (como /index.html ou /styles.css), serve.
    # Senão, retorna index.html (para Vue Router/SPA)
    try_files $uri $uri/ /index.html; 
    # Não precisa de proxy_pass
  }

  # ... (gzip)
}
